#!/usr/bin/env bash
# Encrypts a single file
# Usage: noirbox-encrypt-file filename

set -e -u -o pipefail

script_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
. "$script_dir/_noirbox-common"

up_to_noirbox_root
read_config
get_local_key

file="${1%.gpg}"

encrypt_file "$file" "$local_key"

